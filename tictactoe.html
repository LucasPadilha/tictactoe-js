<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Jogo da Velha - Lucas Padilha dos Santos</title>
	<style>
	table {
		width: 300px;
		border-collapse: collapse;
		display: block;
		margin: 0 auto;
	}

	td {
		text-align: center;
		font-size: 40px;
		color: #969696;
		width: 100px;
		height: 100px;
		border: 1px solid #d6d6d6;
	}

	tr > td:last-child {
		border-right: none;
	}

	tr > td:first-child {
		border-left: none;
	}

	table tr:first-child > td {
		border-top: none;
	}

	table tr:last-child > td {
		border-bottom: none;
	}

	h1 {
		text-align: center;
		font-size: 50px;
		width: 300px;
		display: block;
		margin: 0 auto;
		color: #646464;
		margin-bottom: 20px;
	}

	h4 {
		color: #646464;
	}

	.corpo {
		margin: 0 auto;
		width: 600px;
		display: block;
		text-align: center;
	}
	</style>


	<script type="text/javascript">
	var turno = 0;
	function selecionaCampo(campo) {
		var turnoAtual = document.getElementById('turno'); 
		if (!verificaGanhador()) {
			if (campo.innerHTML == "") {
				if (turno % 2 == 0) {
					campo.innerHTML = 'X';
					turnoAtual.innerHTML = "Player 2 turn";
				} else {
					campo.innerHTML = 'O';
					turnoAtual.innerHTML = "Player 1 turn";
				}
				turno++;
				alteraTurno();
				verificaGanhador();
			}
		}
	}

	function verificaGanhador() {
		var campos  = document.getElementsByClassName('campo');
		var campo11 = document.getElementById('campo11');
		var campo12 = document.getElementById('campo12');
		var campo13 = document.getElementById('campo13');
		var campo21 = document.getElementById('campo21');
		var campo22 = document.getElementById('campo22');
		var campo23 = document.getElementById('campo23');
		var campo31 = document.getElementById('campo31');
		var campo32 = document.getElementById('campo32');
		var campo33 = document.getElementById('campo33');
		var velha 	= false;
		var vencedor = false;

		// horizontal
		if (campo11.innerHTML == campo12.innerHTML && campo12.innerHTML == campo13.innerHTML && campo11.innerHTML != "") {
			if (campo11.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		if (campo21.innerHTML == campo22.innerHTML && campo22.innerHTML == campo23.innerHTML && campo21.innerHTML != "") {
			if (campo21.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		if (campo31.innerHTML == campo32.innerHTML && campo32.innerHTML == campo33.innerHTML && campo31.innerHTML != "") {
			if (campo31.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		// vertical
		if (campo11.innerHTML == campo21.innerHTML && campo21.innerHTML == campo31.innerHTML && campo11.innerHTML != "") {
			if (campo11.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		if (campo12.innerHTML == campo22.innerHTML && campo22.innerHTML == campo32.innerHTML && campo12.innerHTML != "") {
			if (campo12.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		if (campo13.innerHTML == campo23.innerHTML && campo23.innerHTML == campo33.innerHTML && campo13.innerHTML != "") {
			if (campo13.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		// diagonal
		if (campo11.innerHTML == campo22.innerHTML && campo22.innerHTML == campo33.innerHTML && campo11.innerHTML != "") {
			if (campo11.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}
		if (campo13.innerHTML == campo22.innerHTML && campo22.innerHTML == campo31.innerHTML && campo13.innerHTML != "") {
			if (campo13.innerHTML == "X") {
				alert("Player 1 won!");
			} else {
				alert("Player 2 won!");
			}
			vencedor = true;
		}

		for (i = 0; i < campos.length; i++) {
			if (campos[i].innerHTML == "") {
				velha = true;
			}	
		}

		if (!velha && !vencedor) {
			alert("Ihh... Deu velha!");
		}	
		return vencedor;
	}


	function novaPartida() {
		var campos = document.getElementsByClassName('campo');
		var holderTurno = document.getElementById('turno');
		for (i = 0; i < campos.length; i++) {
			campos[i].innerHTML = "";
		}
		holderTurno.innerHTML = "Player 1 Turn";
		turno = 0;
	}

	function alteraTurno() {
		var holderTurno = document.getElementById('turno');
		if (turno % 2 == 0) {
			holderTurno.innerHTML = "Player 1 Turn";
		} else {
			holderTurno.innerHTML = "Player 2 Turn";
		}
	}	
	</script>

</head>
<body>
	<div class="corpo">
		<h1>Jogo da Velha</h1>
		<h4 id="turno">Player 1 Turn</h4>
		<table>
			<tr>
				<td onclick="selecionaCampo(this)" class="campo" id="campo11"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo12"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo13"></td>
			</tr>
			<tr>
				<td onclick="selecionaCampo(this)" class="campo" id="campo21"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo22"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo23"></td>
			</tr>
			<tr>
				<td onclick="selecionaCampo(this)" class="campo" id="campo31"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo32"></td>
				<td onclick="selecionaCampo(this)" class="campo" id="campo33"></td>
			</tr>
		</table>

	<br><br>
	<button onclick="novaPartida()">New Game</button>
	</div>

</body>
</html>